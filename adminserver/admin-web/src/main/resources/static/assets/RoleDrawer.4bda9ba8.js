var C=Object.defineProperty;var F=Object.getOwnPropertySymbols;var I=Object.prototype.hasOwnProperty,R=Object.prototype.propertyIsEnumerable;var g=(e,a,t)=>a in e?C(e,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[a]=t,w=(e,a)=>{for(var t in a||(a={}))I.call(a,t)&&g(e,t,a[t]);if(F)for(var t of F(a))R.call(a,t)&&g(e,t,a[t]);return e};var D=(e,a,t)=>new Promise((n,i)=>{var p=s=>{try{o(t.next(s))}catch(u){i(u)}},l=s=>{try{o(t.throw(s))}catch(u){i(u)}},o=s=>s.done?n(s.value):Promise.resolve(s.value).then(p,l);o((t=t.apply(e,a)).next())});import{B as k}from"./BasicForm.cb578098.js";import"./componentMap.c6ede36b.js";import{u as y}from"./useForm.b6a6d306.js";import"./RadioButtonGroup.43c3299f.js";import{bS as P,E as _,au as E,a as x,v as b,k as d,f as T,aw as h,o as $,j as A,z as B,n as v,ax as L}from"./index.9ac021fd.js";import{S as M}from"./index.a5964cee.js";import{s as O,g as U,f as j}from"./System.78ab1c71.js";import{B as N,a as V}from"./index.80c5ee2b.js";import{_ as Z}from"./index.4fdb1385.js";const ue=[{title:"\u89D2\u8272\u540D\u79F0",dataIndex:"nameZh",width:200},{title:"\u89D2\u8272\u503C",dataIndex:"name",width:180},{title:"\u6392\u5E8F",dataIndex:"orderNo",width:50},{title:"\u72B6\u6001",dataIndex:"status",width:120,customRender:({record:e})=>(Reflect.has(e,"pendingStatus")||(e.pendingStatus=!1),P(M,{checked:e.status===1,checkedChildren:"\u5DF2\u542F\u7528",unCheckedChildren:"\u5DF2\u7981\u7528",loading:e.pendingStatus,onChange(a){e.pendingStatus=!0;const t=a?1:0,{createMessage:n}=_();O(e.id,t).then(()=>{e.status=t,n.success("\u5DF2\u6210\u529F\u4FEE\u6539\u89D2\u8272\u72B6\u6001")}).catch(()=>{n.error("\u4FEE\u6539\u89D2\u8272\u72B6\u6001\u5931\u8D25")}).finally(()=>{e.pendingStatus=!1})}}))},{title:"\u521B\u5EFA\u65F6\u95F4",dataIndex:"createdAt",width:180},{title:"\u63CF\u8FF0",dataIndex:"description"}],ne=[{field:"id",label:"ID",component:"Input",colProps:{span:8}},{field:"nameZh",label:"\u89D2\u8272\u540D\u79F0",component:"Input",colProps:{span:8}},{field:"status",label:"\u72B6\u6001",component:"Select",componentProps:{options:[{label:"\u542F\u7528",value:1},{label:"\u505C\u7528",value:0}]},colProps:{span:8}}],q=[{field:"id",label:"\u89D2\u8272id",component:"Input",dynamicDisabled:!0},{field:"nameZh",label:"\u89D2\u8272\u540D\u79F0",required:!0,component:"Input"},{field:"name",label:"\u89D2\u8272\u503C",required:!0,component:"Input"},{field:"status",label:"\u72B6\u6001",component:"RadioButtonGroup",defaultValue:1,componentProps:{options:[{label:"\u542F\u7528",value:1},{label:"\u505C\u7528",value:0}]}},{label:"\u63CF\u8FF0",field:"description",component:"InputTextArea"},{label:" ",field:"menu",slot:"menu",component:"Input"}],z=x({name:"RoleDrawer",components:{BasicDrawer:N,BasicForm:k,BasicTree:Z},emits:["success","register"],setup(e,{emit:a}){const t=b(!0),n=b([]),[i,{resetFields:p,setFieldsValue:l,validate:o}]=y({labelWidth:90,baseColProps:{span:24},schemas:q,showActionButtonGroup:!1}),[s,{setDrawerProps:u,closeDrawer:c}]=V(r=>D(this,null,function*(){if(p(),u({confirmLoading:!1}),d(n).length===0){const m={};n.value=yield U(m)}t.value=!!(r!=null&&r.isUpdate),d(t)&&l(w({},r.record))})),f=T(()=>d(t)?"\u7F16\u8F91\u89D2\u8272":"\u65B0\u589E\u89D2\u8272");function S(){return D(this,null,function*(){try{const r=yield o();u({confirmLoading:!0});const{createMessage:m}=_();d(t)&&j(r).then(()=>{m.success("1")}).catch(()=>{m.error("2")}).finally(()=>{c(),a("success")}),c(),a("success")}finally{u({confirmLoading:!1})}})}return{registerDrawer:s,registerForm:i,getTitle:f,handleSubmit:S,treeData:n}}});function G(e,a,t,n,i,p){const l=h("BasicTree"),o=h("BasicForm"),s=h("BasicDrawer");return $(),A(s,L(e.$attrs,{onRegister:e.registerDrawer,showFooter:"",title:e.getTitle,width:"500px",onOk:e.handleSubmit}),{default:B(()=>[v(o,{onRegister:e.registerForm},{menu:B(({model:u,field:c})=>[v(l,{value:u[c],"onUpdate:value":f=>u[c]=f,treeData:e.treeData,fieldNames:{title:"name",key:"id"},checkable:"",toolbar:"",title:"\u83DC\u5355\u5206\u914D"},null,8,["value","onUpdate:value","treeData"])]),_:1},8,["onRegister"])]),_:1},16,["onRegister","title","onOk"])}var W=E(z,[["render",G]]),oe=Object.freeze(Object.defineProperty({__proto__:null,default:W},Symbol.toStringTag,{value:"Module"}));export{W as R,oe as a,ue as c,ne as s};

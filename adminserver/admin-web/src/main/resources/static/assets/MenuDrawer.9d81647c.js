var y=Object.defineProperty;var D=Object.getOwnPropertySymbols;var P=Object.prototype.hasOwnProperty,S=Object.prototype.propertyIsEnumerable;var h=(e,t,u)=>t in e?y(e,t,{enumerable:!0,configurable:!0,writable:!0,value:u}):e[t]=u,E=(e,t)=>{for(var u in t||(t={}))P.call(t,u)&&h(e,u,t[u]);if(D)for(var u of D(t))S.call(t,u)&&h(e,u,t[u]);return e};var d=(e,t,u)=>new Promise((r,a)=>{var p=o=>{try{n(u.next(o))}catch(l){a(l)}},i=o=>{try{n(u.throw(o))}catch(l){a(l)}},n=o=>o.done?r(o.value):Promise.resolve(o.value).then(p,i);n((u=u.apply(e,t)).next())});import{B as A}from"./BasicForm.f15e10d2.js";import"./componentMap.89831d4d.js";import{u as _}from"./useForm.e0cbc007.js";import"./RadioButtonGroup.bc4b2238.js";import{bS as w,b6 as x,au as R,a as M,v as k,k as m,f as q,aw as B,o as T,j as V,z as G,n as N,ax as $,E as L}from"./index.21dbddea.js";import{T as O}from"./index.193019b5.js";import{B as U,a as j}from"./index.f4811fee.js";import{g as z,a as W,b as H}from"./System.6ea9c3aa.js";const se=[{title:"\u83DC\u5355\u540D\u79F0",dataIndex:"name",width:200,align:"left"},{title:"\u56FE\u6807",dataIndex:"icon",width:50,customRender:({record:e})=>w(x,{icon:e.icon})},{title:"\u540E\u7AEF\u8BF7\u6C42\u8DEF\u5F84",dataIndex:"requestUrl"},{title:"\u540E\u7AEF\u8BF7\u6C42\u65B9\u5F0F",dataIndex:"requestMethod"},{title:"\u524D\u7AEF\u9875\u9762\u7EC4\u4EF6",dataIndex:"component"},{title:"\u6392\u5E8F",dataIndex:"orderNo",width:50},{title:"\u72B6\u6001",dataIndex:"status",width:80,customRender:({record:e})=>{const u=~~e.status===1,r=u?"green":"red",a=u?"\u542F\u7528":"\u505C\u7528";return w(O,{color:r},()=>a)}},{title:"\u662F\u5426\u663E\u793A",dataIndex:"showFlag"},{title:"\u521B\u5EFA\u65F6\u95F4",dataIndex:"createTime",width:180}],f=e=>e===0,g=e=>e===1,F=e=>e===2,re=[{field:"id",label:"ID",component:"Input",colProps:{span:8}},{field:"name",label:"\u83DC\u5355\u540D\u79F0",component:"Input",colProps:{span:8}},{field:"status",label:"\u72B6\u6001",component:"Select",componentProps:{options:[{label:"\u542F\u7528",value:1},{label:"\u505C\u7528",value:0}]},colProps:{span:8}}],J=[{field:"id",label:"ID",component:"InputNumber",dynamicDisabled:!0},{field:"type",label:"\u83DC\u5355\u7C7B\u578B",component:"RadioButtonGroup",defaultValue:0,componentProps:{options:[{label:"\u76EE\u5F55",value:0},{label:"\u83DC\u5355",value:1},{label:"\u6309\u94AE",value:2}]},colProps:{lg:24,md:24}},{field:"name",label:"\u83DC\u5355\u540D\u79F0",component:"Input",required:!0},{field:"title",label:"\u83DC\u5355\u540D\u79F0i18n",component:"Input"},{field:"id",label:"\u83DC\u5355id",component:"Input",dynamicDisabled:!0},{field:"pid",label:"\u4E0A\u7EA7\u83DC\u5355",component:"TreeSelect",componentProps:{fieldNames:{label:"name",key:"id",value:"id"},getPopupContainer:()=>document.body}},{field:"orderNo",label:"\u6392\u5E8F",component:"InputNumber"},{field:"icon",label:"\u56FE\u6807",component:"IconPicker",required:!0,ifShow:({values:e})=>f(e.type)},{field:"path",label:"\u524D\u7AEF\u9875\u9762\u8DEF\u5F84",component:"Input",required:!0,ifShow:({values:e})=>!F(e.type)},{field:"component",label:"\u524D\u7AEF\u9875\u9762\u7EC4\u4EF6",component:"Input",required:!0,ifShow:({values:e})=>g(e.type)},{field:"requestUrl",label:"\u540E\u7AEF\u8BF7\u6C42\u8DEF\u5F84",component:"Input",ifShow:({values:e})=>!f(e.type)},{field:"requestMethod",label:"\u540E\u7AEF\u8BF7\u6C42\u65B9\u5F0F",component:"Input",ifShow:({values:e})=>!f(e.type)},{field:"status",label:"\u72B6\u6001",component:"RadioButtonGroup",defaultValue:0,componentProps:{options:[{label:"\u542F\u7528",value:1},{label:"\u7981\u7528",value:0}]}},{field:"isExt",label:"\u662F\u5426\u5916\u94FE",component:"RadioButtonGroup",defaultValue:0,componentProps:{options:[{label:"\u5426",value:0},{label:"\u662F",value:1}]},ifShow:({values:e})=>!F(e.type)},{field:"keepalive",label:"\u662F\u5426\u7F13\u5B58",component:"RadioButtonGroup",defaultValue:0,componentProps:{options:[{label:"\u5426",value:0},{label:"\u662F",value:1}]},ifShow:({values:e})=>g(e.type)},{field:"showFlag",label:"\u662F\u5426\u663E\u793A",component:"RadioButtonGroup",defaultValue:1,componentProps:{options:[{label:"\u5426",value:0},{label:"\u662F",value:1}]},ifShow:({values:e})=>!F(e.type)}],K=M({name:"MenuDrawer",components:{BasicDrawer:U,BasicForm:A},emits:["success","register"],setup(e,{emit:t}){const u=k(!0),[r,{resetFields:a,setFieldsValue:p,updateSchema:i,validate:n}]=_({labelWidth:100,schemas:J,showActionButtonGroup:!1,baseColProps:{lg:12,md:24}}),[o,{setDrawerProps:l,closeDrawer:b}]=j(s=>d(this,null,function*(){a(),l({confirmLoading:!1}),u.value=!!(s!=null&&s.isUpdate),m(u)&&p(E({},s.record));const C=yield z({});i({field:"pid",componentProps:{treeData:C}})})),I=q(()=>m(u)?"\u7F16\u8F91\u83DC\u5355":"\u65B0\u589E\u83DC\u5355");function v(){return d(this,null,function*(){try{const s=yield n();l({confirmLoading:!0});const{createMessage:c}=L();m(u)?W(s).then(()=>{c.success("1")}).catch(()=>{c.error("2")}).finally(()=>{b(),t("success")}):H(s).then(()=>{c.success("3")}).catch(()=>{c.error("4")}).finally(()=>{b(),t("success")})}finally{l({confirmLoading:!1})}})}return{registerDrawer:o,registerForm:r,getTitle:I,handleSubmit:v}}});function Q(e,t,u,r,a,p){const i=B("BasicForm"),n=B("BasicDrawer");return T(),V(n,$(e.$attrs,{onRegister:e.registerDrawer,showFooter:"",title:e.getTitle,width:"50%",onOk:e.handleSubmit}),{default:G(()=>[N(i,{onRegister:e.registerForm},null,8,["onRegister"])]),_:1},16,["onRegister","title","onOk"])}var X=R(K,[["render",Q]]),ie=Object.freeze(Object.defineProperty({__proto__:null,default:X},Symbol.toStringTag,{value:"Module"}));export{X as M,ie as a,se as c,re as s};
